<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <style>
        td,
        th {
            padding: 10px;
            border-bottom: 1px solid black;
            border-radius: 0 0 10px 0;
        }

        input {
            border-top: 1 px solid #db0101;
            text-align: center;
            border-radius: 10px 0 10px 0;
        }
    </style>
</head>

<body>
    <table>
        <tr>
            <td><label for="fn">First Name: </label></td>
            <td><input type="text" id="fn" required></td>
        </tr>
        <tr>
            <td><label for="ln">Last Name: </label></td>
            <td><input type="text" id="ln" required></td>
        </tr>
        <tr>
            <td><label for="ct">City: </label> </td>
            <td><input type="text" id="ct" required></td>
        </tr>
        <tr>
            <td><button onclick="main()">Submit</button></td>
        </tr>
    </table>
    <!-- <button onclick="reset()">reset</button> -->
    <table>
        <tr>
            <th>ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>City</th>
        </tr>
        <tbody id="pp"></tbody>
    </table>
    <script>
        let id = 1;
        let par = document.getElementById('pp');

        let emptyArr = [];
        const loop = (emptyArr)=>{
                            par.innerHTML = "";
                emptyArr.filter((val, ind) => {
                    par.innerHTML += `<tr><td>${val.id}</td><td> ${val.firstName}</td> <td>${val.lastName} </td><td> ${val.city}</td> <td><button onclick="Update(${ind})">Update</button></td><td><button  onclick="del(${ind})">Delete</button> </td></tr>`;
                })
        }
        const main = () => {

            let fn = document.getElementById('fn').value;
            let ln = document.getElementById('ln').value;
            let ct = document.getElementById('ct').value;
            let input = { id: `${id}`, firstName: `${fn}`, lastName: `${ln}`, city: `${ct}` };

            let ex = emptyArr.some(user => user.firstName === fn);
            let ex1 = emptyArr.some(user => user.lastName === ln);
            let ex2 = emptyArr.some(user => user.city === ct);
            
            let exist = ex && ex1 && ex2;
            let empt = fn != '' && ln != '' && ct != '';
            
            
            console.log(exist)
            if (empt && !exist) {
                id++;
                emptyArr.push(input);
                loop(emptyArr);
                
            }else{
                alert((!empt)?'Fillout All data' : 'Data Olready exist');
            }
        };
        
        const del = (ind) => {
            flag = confirm("Are uh Sure");
            if (flag) {
                
                emptyArr = emptyArr.filter((j, index) => index != ind)
                loop(emptyArr)
            }
            
        }
        const Update = (ind) => {
            let fn = prompt('enter ur First name');
            let ln = prompt('enter ur Last name');
            let ct = prompt('enter ur city name');
            let ex = emptyArr.some(user => user.firstName === fn);
            let ex1 = emptyArr.some(user => user.lastName === ln);
            let ex2 = emptyArr.some(user => user.city === ct);
            let exist = ex && ex1 && ex2;
            let empt = fn != '' && ln != '' && ct != '';
            if (empt && !exist && fn && ln && ct) {
                
                emptyArr[ind].firstName = fn
                emptyArr[ind].lastName = ln;
                emptyArr[ind].city = ct;
                loop(emptyArr)
            }else{
                alert((!fn || !ln || !ct)?'Fillout All data' : 'Data Olready exist');
            }
            
        }
        
        
        
        
    </script>
</body>

</html>