<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Form</title>
    <link rel="stylesheet" href="style.css">

</head>

<body>

    <form class="parent" onsubmit="main(event)">
        <fieldset>
            <legend class="leg"><h2> Login Form</h2></legend>

            <div class="child">
                <fieldset class="pass-group">
                    <legend><b>Email ---</b></legend>
                    <input type="email" id="email" placeholder="Enter Email" name="email" required>
                    <span id="mail">@gmail.com</span>
                </fieldset>

                <fieldset class="pass-group">
                    <legend><b>Password ---</b></legend>
                    <input type="password" id="password" placeholder="Enter Password" name="password" required>
                    
                    
                </fieldset>
                <p class="accnt">Doesn't have account <a href="sign_up.html">Create a new Account</a></p>
                <p><a href="Reset.html">Reset Password</a></p>
                <p id="status"></p>
                <button type="submit">Login</button>
            </div>
        </fieldset>
    </form>

    <script>


        document.getElementById('email').addEventListener('blur',function(){
            if (this.value!= "" && !this.value.includes('@')) {
                    document.getElementById('mail').innerHTML = "";
                    this.value += '@gmail.com'
                    
                }
                else{
                    document.getElementById('mail').innerHTML = "@gmail.com";
                }
                if (this.value.includes('@gmail.com')) {
                    document.getElementById('mail').innerHTML = "";
            }
            
            }
            )
        


            let status = document.getElementById('status');
        const main = (event) => {
            event.preventDefault();
            let data = new FormData(event.target);
            obj = Object.fromEntries(data);
            let arr = JSON.parse(localStorage.getItem('Data'));
            let mailExist = arr.some(stg => stg.email === obj.email);
            let passExist = arr.some(stg => stg.password === obj.password);
            if (mailExist && passExist) {
                status.style.color = 'green'
                status.innerHTML = 'Logging in';
                            setTimeout(() => {
                window.location.href = "https://www.youtube.com";
                }, 1500);
            }
            else{
                status.style.color = 'red'
                status.innerHTML = "Account Doesn't found";
            
            }
            

        }
    </script>

</body>

</html>